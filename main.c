/*  ************************************************************************************
*								�Ϻ�оʥ���ӹɷ����޹�˾
*								    www.holychip.cn	
*	************************************************************************************
*/
////////////////////////////////////////////////////////////////////////
////////////////////////////	  ͷ�ļ�	////////////////////////////
////////////////////////////////////////////////////////////////////////

#include "holychip_define.h"
#include "inital.h"
//#include "adc.h"
#include "KEY.h"
#include "led.h"
#include "eve.h"
#include "driver.h"
#include "power.h"
#include "battery.h"
#include "charge.h"
#include "sleep.h"
#include "rgb.h"

////////////////////////////////////////////////////////////////////////
////////////////////////////	  ��������	////////////////////////////
////////////////////////////////////////////////////////////////////////

//typedef unsigned char uchar;
//typedef unsigned int uint; 


extern unsigned int databufl;
extern unsigned int databufh;
/*------------------------------------------------
 mS��ʱ����������������� unsigned int t���޷���ֵ
 unsigned int �Ƕ����޷����ַ���������ֵ�ķ�Χ��
 0~1024 ��ȷ��ʱ��ʹ�û��
------------------------------------------------*/
//void DelayUs2x(unsigned char t)
//{   
// while(--t);
//}
//
//
//void DelayMs(unsigned int t)
//{
//     
// while(t--)
// {
//     //������ʱ1mS
//     DelayUs2x(120);
//	 DelayUs2x(125);
// }
//}

////////////////////////////////////////////////////////////////////////
////////////////////////////	  ������	////////////////////////////
////////////////////////////////////////////////////////////////////////

void main(void)							//��Watch�￴���
{
	ramInitial();						//��RAM
	inital();							//�˿ڳ�ʼ��
	sysinitial();                      	//ϵͳ��ʼ�� 
	DelayMs(100);						//��ʱ�ȴ�ϵͳ�����ȶ�
//	adc(3,4);							//ͨ��AN0,�ڲ��ο���ѹ4V
	//adc(1,3);							//ͨ��AN1,�ڲ��ο���ѹ3V
	//adc(7,2);							//ͨ��AN7,�ڲ��ο���ѹ2V
	//adc(8,1);							//ͨ��AN8,�ڲ��ο���ѹ1.3V
	//adc(14,5);							//ͨ��AN14,�ڲ��ο���ѹVDD
	//adc(5,4);							//ͨ��AN5(�ڲ�1/4VDD),�ڲ��ο���ѹ4V

	Power_Init();
	key_Init();
	led_Init();
	
	Tick_Timer_Init();
	Charge_Config();
	Battery_Init();
	RGB_Init();
	
	GIE = 1;					//ʹ��ȫ���ж�
	
	while(1)
	{

		Eve_Manage();
		Power_Manage();	
		LED_Manage();
		Charge_Manage();
		Battery_Manage();
		Sleep_Manage();
	}
	
}	
